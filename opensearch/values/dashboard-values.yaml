opensearchHosts: "https://opensearch-cluster-master:9200"
clusterName: "dashboard-cluster"
disableSecurityDashboardsPlugin: false
extraEnvs:
  - name: OPENSEARCH_USERNAME
    value: admin
  - name: OPENSEARCH_PASSWORD
    valueFrom:
      secretKeyRef:
        name: opensearch-admin-secret
        key: OPENSEARCH_INITIAL_ADMIN_PASSWORD

config:
  opensearch_dashboards.yml: |
    server.host: 0.0.0.0
    opensearch.hosts: [https://opensearch-cluster-master:9200]
    opensearch.ssl.certificateAuthorities: ["/usr/share/opensearch-dashboards/config/certs/ca.crt"]
    opensearch.ssl.verificationMode: certificate
    opensearch.username: admin
    opensearch.password: ${OPENSEARCH_PASSWORD}
    opensearch.requestHeadersAllowlist: ["securitytenant","Authorization"]
    opensearch_security.multitenancy.enabled: true
    opensearch_security.multitenancy.tenants.preferred: ["Private", "Global"]
    opensearch_security.readonly_mode.roles: ["kibana_read_only"]
    opensearch_security.cookie.secure: false
replicaCount: 1

resources:
  requests:
    cpu: "100m"
    memory: "256Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"


extraVolumes:
  - name: opensearch-ca
    secret:
      secretName: opensearch-ca-secret

extraVolumeMounts:
  - name: opensearch-ca
    mountPath: /usr/share/opensearch-dashboards/config/certs
    readOnly: true

ingress:
  enabled: true
  className: nginx   
  annotations: {}
  hosts:
    - host: os.gruzo.kz
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: opensearch-dashboards
              port:
                number: 80
  tls:
    - hosts:
        - os.gruzo.kz
      secretName: opensearch-nodes-cert