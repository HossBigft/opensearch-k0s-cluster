project: opensearch-stack
version: 0.36.0

repositories:
  - name: jetstack
    url: https://charts.jetstack.io
  - name: opensearch
    url: https://opensearch-project.github.io/helm-charts
  - name: longhorn
    url: https://charts.longhorn.io

releases:
  - name: cert-manager
    chart:
      name: jetstack/cert-manager
      version: v1.13.3
    namespace: cert-manager
    create_namespace: true
    values:
      - installCRDs: true

  - name: opensearch-certs
    chart:
      name: ./charts/opensearch-certs
    namespace: opensearch
    create_namespace: true
    depends_on:
      - cert-manager@cert-manager

  - name: longhorn
    chart:
      name: longhorn/longhorn
    namespace: longhorn-system
    create_namespace: true
    values:
      - defaultSettings:
          defaultReplicaCount: 2
          defaultDataPath: /var/lib/longhorn
          defaultLonghornStaticStorageClass: longhorn
        persistence:
          defaultClass: true
          defaultClassReplicaCount: 2

  - name: opensearch
    chart:
      name: opensearch/opensearch
    namespace: opensearch
    values:
      - values/opensearch-values.yaml
    depends_on:
      - opensearch-certs@opensearch

  - name: opensearch-dashboards
    chart:
      name: opensearch/opensearch-dashboards
    namespace: opensearch
    values:
      - values/dashboard-values.yaml
    depends_on:
      - opensearch@opensearch